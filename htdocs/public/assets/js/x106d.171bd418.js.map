{"version":3,"sources":["webpack:///./src/views/business/RedeemPoints.vue?fdea","webpack:///src/views/business/RedeemPoints.vue","webpack:///./src/views/business/RedeemPoints.vue?26af","webpack:///./src/views/business/RedeemPoints.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","key","tabImg","attrs","tabImgHeight","tabImgAspectRation","$store","state","app","_v","_s","$t","staticStyle","model","callback","$$v","tab","$auth","user","role","premium","verifyCodeForm","success","scopedSlots","_u","fn","msg","points","proxy","customerNumber","toLowerCase","ref","invalid","on","$event","preventDefault","verifyCode","onDetect","supportsQrCamera","inputLoading","openQrCamera","$set","loading","_e","verifyCodeDialog","processCode","staticRenderFns","components","QrcodeCapture","data","mask","created","locale","moment","substr","tabImgs","window","innerWidth","tabImgDefaultHeight","forEach","images","i","Image","src","img","code","$route","query","c","methods","copyStringToClipboard","formatNumber","Intl","NumberFormat","replace","format","number","formatCurrency","onResize","index","$el","querySelector","click","axios","component","VAlert","VBtn","VCard","VCardActions","VCardText","VCardTitle","VCol","VContainer","VDialog","VDivider","VForm","VIcon","VImg","VRow","VSpacer","VTab","VTabItem","VTabs","VTabsItems","VTabsSlider","Resize"],"mappings":"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","file":"js/x106d.171bd418.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.onResize),expression:\"onResize\"}],staticClass:\"viewContainer\"},[_c('v-container',{staticClass:\"pa-0\"},[_c('v-img',{key:_vm.tabImg,attrs:{\"src\":_vm.tabImg,\"min-height\":_vm.tabImgHeight,\"aspect-ratio\":_vm.tabImgAspectRation,\"transition\":\"fade-transition\"}},[_c('v-container',{staticClass:\"inner-container\"},[_c('v-card',{staticClass:\"mt-md-12 mt-0 content-tabs-wrapper\",attrs:{\"tile\":\"\",\"elevation\":\"0\"}},[_c('v-tabs',{staticClass:\"px-5 content-tabs\",attrs:{\"color\":(_vm.$store.state.app.dark) ? 'white' : 'black',\"icons-and-text\":\"\",\"height\":\"100\",\"slider-size\":\"4\",\"show-arrows\":\"\"}},[_c('v-tabs-slider'),_c('v-tab',{staticClass:\"no-caps\",attrs:{\"to\":{ name: 'business.issue-points' },\"ripple\":false}},[_vm._v(\" \"+_vm._s(_vm.$t('issue'))+\" \"),_c('v-icon',{attrs:{\"size\":\"24\"}},[_vm._v(\"mdi-coins\")])],1),_c('v-tab',{staticClass:\"no-caps\",attrs:{\"to\":{ name: 'business.redeem-points' },\"ripple\":false}},[_vm._v(\" \"+_vm._s(_vm.$t('redeem'))+\" \"),_c('v-icon',{attrs:{\"size\":\"24\"}},[_vm._v(\"mdi-wallet-giftcard\")])],1),_c('v-tab',{staticClass:\"no-caps\",attrs:{\"to\":{ name: 'business.transactions' },\"ripple\":false}},[_vm._v(\" \"+_vm._s(_vm.$t('transactions'))+\" \"),_c('v-icon',{attrs:{\"size\":\"24\"}},[_vm._v(\"mdi-format-list-bulleted\")])],1)],1),_c('v-divider')],1),_c('v-tabs-items',{staticStyle:{\"background-color\":\"transparent\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},[_c('v-tab-item',{attrs:{\"value\":\"tab-0\"}},[_c('v-container',{staticClass:\"pa-0\"},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"9\",\"md\":\"6\"}},[_c('v-card',{staticClass:\"content-tabs-card pa-5 mb-0 mb-md-12\",attrs:{\"flat\":\"\",\"tile\":\"\"}},[(_vm.$auth.user().role === 4 && !_vm.$auth.user().premium)?_c('v-card-text',[_c('p',{staticClass:\"fg--text subtitle-1 font-weight-medium\"},[_vm._v(\" \"+_vm._s(_vm.$t('account_inactive'))+\" \")])]):_c('v-card-text',[_c('v-alert',{staticClass:\"mb-5\",attrs:{\"value\":_vm.verifyCodeForm.success,\"type\":\"success\"}},[_c('i18n',{attrs:{\"path\":\"redeem_points_success\"},scopedSlots:_vm._u([{key:\"points\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.msg.points)+\" \")]},proxy:true},{key:\"value\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.msg.value)+\" \")]},proxy:true},{key:\"customerNumber\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.msg.customerNumber)+\" \")]},proxy:true},{key:\"transactions\",fn:function(){return [_c('router-link',{staticClass:\"white--text\",attrs:{\"to\":{ name: 'business.transactions' }}},[_vm._v(_vm._s(_vm.$t('transactions').toLowerCase()))])]},proxy:true}])})],1),_c('p',{staticClass:\"fg--text subtitle-1\"},[_vm._v(_vm._s(_vm.$t('redeem_points_head')))]),_c('ValidationObserver',{ref:\"verifyCodeForm\",scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar invalid = ref.invalid;\nreturn [_c('v-form',{attrs:{\"id\":\"verifyCodeForm\",\"lazy-validation\":\"\",\"autocomplete\":\"off\",\"method\":\"post\",\"accept-charset\":\"UTF-8\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.verifyCode()}}},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"8\"}},[_c('qrcode-capture',{staticClass:\"d-none\",attrs:{\"multiple\":false,\"id\":\"qrScanner\",\"tabindex\":\"-1\"},on:{\"detect\":_vm.onDetect}}),_c('x-text-field',{directives:[{name:\"mask\",rawName:\"v-mask\",value:('####'),expression:\"'####'\"}],ref:\"verifyCodeForm.code\",staticClass:\"title\",attrs:{\"inputmode\":\"numeric\",\"name\":_vm.$t('code'),\"id\":\"verifyCodeForm.code\",\"rules\":\"required|min:4|max:4\",\"outlined\":\"\",\"placeholder\":\"####\",\"prepend-inner-icon\":(_vm.supportsQrCamera()) ? 'mdi-qrcode' : '',\"loading\":_vm.inputLoading},on:{\"click:prepend-inner\":_vm.openQrCamera},model:{value:(_vm.verifyCodeForm.code),callback:function ($$v) {_vm.$set(_vm.verifyCodeForm, \"code\", $$v)},expression:\"verifyCodeForm.code\"}})],1),_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('v-btn',{staticClass:\"title ma-0 no-caps\",attrs:{\"type\":\"submit\",\"depressed\":\"\",\"tile\":\"\",\"block\":\"\",\"color\":\"ctaBg ctaFg--text\",\"height\":\"56px\",\"loading\":_vm.verifyCodeForm.loading,\"disabled\":_vm.verifyCodeForm.loading || invalid}},[_vm._v(\" \"+_vm._s(_vm.$t('verify'))+\" \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\"mdi-arrow-right\")])],1)],1)],1)],1)]}}])}),(_vm.supportsQrCamera())?_c('p',{staticClass:\"mt-0 mb-0 fg--text subtitle-1\"},[_vm._v(_vm._s(_vm.$t('redeem_points_footer_qr')))]):_vm._e(),(!_vm.supportsQrCamera())?_c('p',{staticClass:\"mt-0 mb-0 fg--text subtitle-1\"},[_vm._v(_vm._s(_vm.$t('redeem_points_footer')))]):_vm._e()],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"360\"},model:{value:(_vm.verifyCodeDialog),callback:function ($$v) {_vm.verifyCodeDialog=$$v},expression:\"verifyCodeDialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.$t('redeem_points')))]),_c('v-card-text',[_c('p',{staticClass:\"body-1\"},[_c('i18n',{attrs:{\"path\":\"redeem_points_verify\"},scopedSlots:_vm._u([{key:\"points\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.msg.points)+\" \")]},proxy:true},{key:\"value\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.msg.value)+\" \")]},proxy:true},{key:\"customerNumber\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.msg.customerNumber)+\" \")]},proxy:true}])})],1)]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{staticClass:\"no-caps\",attrs:{\"color\":\"secondary\",\"text\":\"\"},on:{\"click\":function($event){_vm.verifyCodeDialog = false}}},[_vm._v(_vm._s(_vm.$t('cancel')))]),_c('v-btn',{staticClass:\"no-caps\",attrs:{\"color\":\"NavBg NavFg--text\",\"depressed\":\"\",\"loading\":_vm.verifyCodeForm.loading,\"disabled\":_vm.verifyCodeForm.loading},on:{\"click\":function($event){_vm.verifyCodeDialog = false;_vm.processCode()}}},[_vm._v(_vm._s(_vm.$t('redeem_points')))])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"viewContainer\" v-resize=\"onResize\">\r\n    <v-container class=\"pa-0\">\r\n      <v-img\r\n        :src=\"tabImg\"\r\n        :key=\"tabImg\"\r\n        :min-height=\"tabImgHeight\"\r\n        :aspect-ratio=\"tabImgAspectRation\"\r\n        transition=\"fade-transition\"\r\n      >\r\n        <v-container class=\"inner-container\">\r\n          <v-card class=\"mt-md-12 mt-0 content-tabs-wrapper\" tile elevation=\"0\">\r\n            <v-tabs\r\n              :color=\"($store.state.app.dark) ? 'white' : 'black'\"\r\n              class=\"px-5 content-tabs\"\r\n              icons-and-text\r\n              height=\"100\"\r\n              slider-size=\"4\"\r\n              show-arrows\r\n            >\r\n              <v-tabs-slider></v-tabs-slider>\r\n              <v-tab :to=\"{ name: 'business.issue-points' }\" class=\"no-caps\" :ripple=\"false\">\r\n                {{ $t('issue') }}\r\n                <v-icon size=\"24\">mdi-coins</v-icon>\r\n              </v-tab>\r\n              <v-tab :to=\"{ name: 'business.redeem-points' }\" class=\"no-caps\" :ripple=\"false\">\r\n                {{ $t('redeem') }}\r\n                <v-icon size=\"24\">mdi-wallet-giftcard</v-icon>\r\n              </v-tab>\r\n              <v-tab :to=\"{ name: 'business.transactions' }\" class=\"no-caps\" :ripple=\"false\">\r\n                {{ $t('transactions') }}\r\n                <v-icon size=\"24\">mdi-format-list-bulleted</v-icon>\r\n              </v-tab>\r\n            </v-tabs>\r\n            <v-divider/>\r\n          </v-card>\r\n          <v-tabs-items v-model=\"tab\" style=\"background-color: transparent;\">\r\n            <v-tab-item value=\"tab-0\">\r\n              <v-container class=\"pa-0\">\r\n                <v-row no-gutters>\r\n                  <v-col\r\n                    cols=\"12\"\r\n                    sm=\"9\"\r\n                    md=\"6\"\r\n                  >\r\n                    <v-card flat tile class=\"content-tabs-card pa-5 mb-0 mb-md-12\">\r\n                      <v-card-text v-if=\"$auth.user().role === 4 && !$auth.user().premium\">\r\n                        <p class=\"fg--text subtitle-1 font-weight-medium\">\r\n                          {{ $t('account_inactive') }}\r\n                        </p>\r\n                      </v-card-text>\r\n                      <v-card-text v-else>\r\n                        <v-alert\r\n                          :value=\"verifyCodeForm.success\"\r\n                          type=\"success\"\r\n                          class=\"mb-5\"\r\n                        >\r\n                          <i18n path=\"redeem_points_success\">\r\n                            <template #points>\r\n                              {{ msg.points }}\r\n                            </template>\r\n                            <template #value>\r\n                              {{ msg.value }}\r\n                            </template>\r\n                            <template #customerNumber>\r\n                              {{ msg.customerNumber }}\r\n                            </template>\r\n                            <template #transactions>\r\n                              <router-link class=\"white--text\" :to=\"{ name: 'business.transactions' }\">{{ $t('transactions').toLowerCase() }}</router-link>\r\n                            </template>\r\n                          </i18n>\r\n                        </v-alert>\r\n                        <p class=\"fg--text subtitle-1\">{{ $t('redeem_points_head') }}</p>\r\n                        <ValidationObserver ref=\"verifyCodeForm\" v-slot=\"{ invalid }\">\r\n                          <v-form \r\n                            id=\"verifyCodeForm\"\r\n                            lazy-validation\r\n                            @submit.prevent=\"verifyCode()\"\r\n                            autocomplete=\"off\"\r\n                            method=\"post\"\r\n                            accept-charset=\"UTF-8\"\r\n                          >\r\n                            <v-row no-gutters>\r\n                              <v-col cols=\"8\">\r\n                                <qrcode-capture @detect=\"onDetect\" :multiple=\"false\" id=\"qrScanner\" tabindex=\"-1\" class=\"d-none\" />\r\n                                <x-text-field\r\n                                  inputmode=\"numeric\"\r\n                                  :name=\"$t('code')\"\r\n                                  v-model=\"verifyCodeForm.code\"\r\n                                  id=\"verifyCodeForm.code\"\r\n                                  ref=\"verifyCodeForm.code\"\r\n                                  rules=\"required|min:4|max:4\"\r\n                                  class=\"title\"\r\n                                  outlined\r\n                                  v-mask=\"'####'\"\r\n                                  placeholder=\"####\"\r\n                                  :prepend-inner-icon=\"(supportsQrCamera()) ? 'mdi-qrcode' : ''\"\r\n                                  :loading=\"inputLoading\"\r\n                                  @click:prepend-inner=\"openQrCamera\"\r\n                                />\r\n                              </v-col>\r\n                              <v-col cols=\"4\">\r\n                                <v-btn\r\n                                  type=\"submit\"\r\n                                  depressed \r\n                                  tile\r\n                                  block\r\n                                  color=\"ctaBg ctaFg--text\"\r\n                                  class=\"title ma-0 no-caps\"\r\n                                  height=\"56px\"\r\n                                  :loading=\"verifyCodeForm.loading\" :disabled=\"verifyCodeForm.loading || invalid\"\r\n                                >\r\n                                  {{ $t('verify') }} <v-icon right>mdi-arrow-right</v-icon>\r\n                                </v-btn>\r\n                              </v-col>\r\n                            </v-row>\r\n                          </v-form>\r\n                        </ValidationObserver>\r\n                        <p class=\"mt-0 mb-0 fg--text subtitle-1\" v-if=\"supportsQrCamera()\">{{ $t('redeem_points_footer_qr') }}</p>\r\n                        <p class=\"mt-0 mb-0 fg--text subtitle-1\" v-if=\"!supportsQrCamera()\">{{ $t('redeem_points_footer') }}</p>\r\n                      </v-card-text>\r\n                    </v-card>\r\n                  </v-col>\r\n                </v-row>\r\n              </v-container>\r\n            </v-tab-item>\r\n          </v-tabs-items>\r\n        </v-container>\r\n      </v-img>\r\n    </v-container>\r\n\r\n    <v-dialog v-model=\"verifyCodeDialog\" persistent max-width=\"360\">\r\n      <v-card>\r\n        <v-card-title class=\"headline\">{{ $t('redeem_points') }}</v-card-title>\r\n        <v-card-text>\r\n          <p class=\"body-1\">\r\n            <i18n path=\"redeem_points_verify\">\r\n              <template #points>\r\n                {{ msg.points }}\r\n              </template>\r\n              <template #value>\r\n                {{ msg.value }}\r\n              </template>\r\n              <template #customerNumber>\r\n                {{ msg.customerNumber }}\r\n              </template>\r\n            </i18n>\r\n          </p>\r\n        </v-card-text>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn color=\"secondary\" class=\"no-caps\" text @click=\"verifyCodeDialog = false\">{{ $t('cancel') }}</v-btn>\r\n          <v-btn color=\"NavBg NavFg--text\" class=\"no-caps\" depressed :loading=\"verifyCodeForm.loading\" :disabled=\"verifyCodeForm.loading\" @click=\"verifyCodeDialog = false;processCode()\">{{ $t('redeem_points') }}</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport { supportsQrCamera, copyStringToClipboard } from '@/utils/helpers'\r\nimport { QrcodeCapture } from 'vue-qrcode-reader'\r\nimport { mask } from 'vue-the-mask'\r\n\r\nexport default {\r\n  components: {\r\n    QrcodeCapture\r\n  },\r\n  data: () => ({\r\n    locale: 'en',\r\n    verifyCodeDialog: false,\r\n    tab: 'tab-0',\r\n    tabImg: 'about:blank',\r\n    tabImgHeight: null,\r\n    tabImgDefaultHeight: 780,\r\n    tabImgAspectRation: 1.7778,\r\n    tabImgs: [],\r\n    inputLoading: false,\r\n    verifyCodeForm: {\r\n      success: false,\r\n      loading: false,\r\n      code: ''\r\n    },\r\n    msg: {\r\n      points: 0,\r\n      value: 0,\r\n      customerNumber: ''\r\n    }\r\n  }),\r\n  directives: {\r\n    mask\r\n  },\r\n  created () {\r\n    // Set locale\r\n    this.locale = (this.$auth.check()) ? this.$auth.user().locale: Intl.DateTimeFormat().resolvedOptions().locale || this.$i18n.locale\r\n    this.moment.locale(this.locale.substr(0,2))\r\n\r\n    // Tab images\r\n    this.tabImgs = [\r\n      this.$init.config.schemeAndHost + '/img/business-redeem-tab.jpg'\r\n    ]\r\n\r\n    // Set image depending on the size of the browser window\r\n    if (window.innerWidth > 760) {\r\n      this.tabImg = this.tabImgs[0]\r\n      this.tabImgHeight = this.tabImgDefaultHeight\r\n      this.tabImgAspectRation = 1.7778\r\n    } else {\r\n      this.tabImgHeight = null\r\n      this.tabImgAspectRation = 3\r\n    }\r\n\r\n    // Preload\r\n    let images = new Array()\r\n    this.tabImgs.forEach(function(img, i) {\r\n      images[i] = new Image()\r\n      images[i].src = img\r\n    })\r\n\r\n    // Query object\r\n    this.verifyCodeForm.code = this.$route.query.c\r\n  },\r\n  methods: {\r\n    supportsQrCamera,\r\n    copyStringToClipboard,\r\n    formatNumber (number) {\r\n      return new Intl.NumberFormat(this.locale.replace('_', '-')).format(number)\r\n    },\r\n    formatCurrency (number, currency) {\r\n      return new Intl.NumberFormat(this.locale.replace('_', '-'), {style: 'currency', currency: currency}).format(number)\r\n    },\r\n    onResize () {\r\n      if (window.innerWidth <= 760) {\r\n        this.tabImg = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII='\r\n        this.tabImgHeight = null\r\n        this.tabImgAspectRation = 3\r\n      } else if (this.tabImg == 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=') {\r\n        let index = this.tab.split('-')\r\n        this.tabImg = this.tabImgs[index[1]]\r\n        this.tabImgHeight = this.tabImgDefaultHeight\r\n        this.tabImgAspectRation = 1.7778\r\n      }\r\n    },\r\n    openQrCamera () {\r\n      this.$el.querySelector('#qrScanner').click()\r\n    },\r\n    async onDetect (promise) {\r\n      this.$refs['verifyCodeForm'].reset()\r\n      this.inputLoading = true\r\n      try {\r\n        const {\r\n          imageData,    // raw image data of image/frame\r\n          content,      // decoded String or null\r\n          location      // QR code coordinates or null\r\n        } = await promise\r\n\r\n        if (content === null) {\r\n          this.$refs['verifyCodeForm.code'].applyResult({\r\n            errors: this.$t('camera_no_qr_found'),\r\n            valid: false,\r\n            failedRules: {}\r\n          })\r\n        } else {\r\n          const url = new window.URL(content)\r\n          const urlParams = new window.URLSearchParams(url.search)\r\n          this.verifyCodeForm.code = urlParams.get('c')\r\n        }\r\n      } catch (error) {\r\n        this.$refs['verifyCodeForm.code'].applyResult({\r\n          errors: error,\r\n          valid: false,\r\n          failedRules: {}\r\n        })\r\n      } finally {\r\n        this.inputLoading = false\r\n      }\r\n    },\r\n    verifyCode () {\r\n      this.verifyCodeForm.loading = true\r\n      this.axios\r\n        .post('/business/redeem/verify-code', {\r\n          locale: this.locale,\r\n          code: this.verifyCodeForm.code\r\n        })\r\n        .then(response => {\r\n          if (response.data.status === 'success') {\r\n            this.verifyCodeDialog = true\r\n            this.msg.points = this.formatNumber(response.data.points)\r\n            this.msg.value = this.formatCurrency(response.data.value, response.data.currency)\r\n            this.msg.customerNumber = response.data.customer_number\r\n          }\r\n        })\r\n        .catch(error => {\r\n          if (error.response.data.status === 'error') {\r\n            this.errorMsg = error.response.data.error\r\n\r\n            let errors = error.response.data.errors || []\r\n\r\n            for (let field in errors) {\r\n              this.$refs['verifyCodeForm.' + field].applyResult({\r\n                errors: errors[field],\r\n                valid: false,\r\n                failedRules: {}\r\n              })\r\n            }\r\n          }\r\n        })\r\n        .finally(() => { \r\n          window.scrollTo(0,0)\r\n          this.verifyCodeForm.loading = false\r\n        })\r\n    },\r\n    processCode () {\r\n      this.verifyCodeForm.loading = true\r\n      this.axios\r\n        .post('/business/redeem/process-code', {\r\n          locale: this.locale,\r\n          code: this.verifyCodeForm.code\r\n        })\r\n        .then(response => {\r\n          if (response.data.status === 'success') {\r\n            this.verifyCodeForm.code = ''\r\n            this.$nextTick(() => this.$refs['verifyCodeForm'].reset())\r\n            this.verifyCodeForm.success = true\r\n            this.msg.points = this.formatNumber(response.data.redeem.points)\r\n            this.msg.value = this.formatCurrency(response.data.redeem.value, response.data.redeem.currency)\r\n            this.msg.customerNumber = response.data.redeem.customer_number\r\n          }\r\n        })\r\n        .catch(error => {\r\n          if (error.response.data.status === 'error') {\r\n            this.errorMsg = error.response.data.error\r\n\r\n            let errors = error.response.data.errors || []\r\n\r\n            for (let field in errors) {\r\n              this.$refs['verifyCodeForm.' + field].applyResult({\r\n                errors: errors[field],\r\n                valid: false,\r\n                failedRules: {}\r\n              })\r\n            }\r\n          }\r\n        })\r\n        .finally(() => { \r\n          window.scrollTo(0,0)\r\n          this.verifyCodeForm.loading = false\r\n        })\r\n    },\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RedeemPoints.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RedeemPoints.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RedeemPoints.vue?vue&type=template&id=0aae8169&\"\nimport script from \"./RedeemPoints.vue?vue&type=script&lang=js&\"\nexport * from \"./RedeemPoints.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsItems } from 'vuetify/lib/components/VTabs';\nimport { VTabsSlider } from 'vuetify/lib/components/VTabs';\ninstallComponents(component, {VAlert,VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VDialog,VDivider,VForm,VIcon,VImg,VRow,VSpacer,VTab,VTabItem,VTabs,VTabsItems,VTabsSlider})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../../../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport Resize from 'vuetify/lib/directives/resize'\ninstallDirectives(component, {Resize})\n"],"sourceRoot":""}